---
const { hash } = Astro.params;

if (Astro.cookies.get('token') == null) {
    return new Response(JSON.stringify({ error: 'Not logged in' }), {
        status: 401,
    });
}

let token = Astro.cookies.get('token').value;

await fetch(`http://localhost:2468/delete/${hash}`, {
    method: 'DELETE',
    headers: {
        Authorization: `${token}`,
    },
})
    .then((res) => res.json())
    .catch((err) => {
        return new Response(JSON.stringify({ error: 'Server error' }), {
            status: 500,
        });
    });

return new Response(JSON.stringify('Sent Delete Request'), { status: 200 });
---
