---
const {hash} = Astro.params
import { API_URL } from "@/constants";

if(Astro.cookies.get('token') == null){
    return new Response(JSON.stringify({error: 'Not logged in'}), {status: 401})
}

let token = Astro.cookies.get('token')?.value

await fetch(`${API_URL}paid/${hash}`, {
    method: 'PUT',
    headers: {
        'Authorization': `${token}`
    }
}).then(res => res.json()).catch(err => {
    return new Response(JSON.stringify({error: 'Server error'}), {status: 500})
})

return new Response(JSON.stringify("Sent Paid Request"), {status: 200})
---